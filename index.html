<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Jsn.crdnl</title>
        
        <!-- Our CSS stylesheet file -->
		<!--link type="text/css" rel="stylesheet" href="assets/css/navigation.css"-->
	<link href='http://fonts.googleapis.com/css?family=Orbitron:900' rel='stylesheet' type='text/css'>
	<link href='http://fonts.googleapis.com/css?family=Iceland' rel='stylesheet' type='text/css'>
	
    <link rel="stylesheet" type='text/css' href="assets/css/styles.css" />
	
	<!-- USER DEFINED STYLES -->
	<link rel="stylesheet" type='text/css' href='content/style_user_custom_props.css' />
	<!-- ------------------- -->
        
        <!--[if lt IE 9]>
          <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
		
    </head>
     
    <body>
			
		<div id="container">
	
			<div id="adminBlock" class="loggedOut">
				<p>Mode administrateur</p>
				<span id="admin_credentials">
					<label for="uName">Login :</label><input type="text" value="" name="uName" id="uName" /><br/>
					<label for="uPass">Mot de passe :</label><input type="password" value="" name="uPass" id="uPass" /><br/>
					<input type="submit" value="Connexion" name="uConn" id="uConn" />
					<span id="admin_msg"></span>
				</span>
				<span id="admin_loading">
					<img src="assets/img/loading.gif" alt="Chargement en cours... " />	
				</span>
				<span id="admin_logged_in">
					<span id="admin_logged_msg">Vous êtes connecté en tant qu'administrateur !</span><br/>
					<input type="submit" value="Enregistrer les modifications" name="uUpdate" id="uUpdate" />
				</span>	
			</div>

			<div id="signature"> 
				jsn.crdnl
			</div> 
			
			<div id="mySpecs">			
				<h2><a href="#">Création de sites</a></h2>
				<h2><a href="#">Développement mobile</a></h2>
				<h2><a href="#">Conception de logiciels</a></h2>
				<h2><a href="#">Ingénierie en Cloud Computing</a></h2>
			</div>
			
			<div id='ascensor'>
				 <div id="qualif">
					<div class="editableAware" rel="content_01">
						<p>Qualification................................... Développeur</p>
						<p>Domaines d'action.......................... Sites web, lociciels, applications Android, etc.</p>
						<p>Connaissances web........................ HTML, CSS, PHP, JS, jQ, AJAX, CMS, etc.</p>
						<p>Connaissances logiciel................... C, C++, C#, Java, etc.</p>
						<p>Connaissances système................. Linux (Apache, Tomcat, Scripts, etc.)</p>
						<p>En attendant, voici mon adresse mail : 
						<a href="mailto:jsn.crdnl@gmail.com" title="jsn.crdnl@gmail.com">
							jsn.crdnl@gmail.com
						</a></p>
					</div>
				</div>
			</div>
		</div>
		
        <!-- JavaScript includes -->
	<script src="assets/js/jquery_1-7-2.min.js"></script>
	<!--script src="assets/js/jquery-1.8.3.min.js"></script-->
        <script src="assets/js/jquery.color-2.1.2.min.js"></script>
        <script src="assets/js/jquery.animate-textshadow.min.js"></script>
	<script src="assets/js/jquery.shuffleLetters.js"></script>
	<script src="assets/js/realshadow-min.js"></script>
	<!--script src="assets/js/easing.js"></script-->
        <script src="assets/js/script.js"></script>
	<span id="ckEditorPlaceholder"></span>
	<script>
		////////////////////////////////////////////////////
		// CONNECT TO THE SERVICE //////////////////////////
		////////////////////////////////////////////////////
		$("#uConn").click(function()
		{
			$("#admin_credentials")	.css("display", "none");
			$("#admin_loading")		.css("display", "inline");
			$("#admin_logged_in")	.css("display", "none");
			
			var usernameInput = $("#uName").val();
			var passwordInput = $("#uPass").val();
			$.ajax
			({
				url : "https://cherrypy-jsncrdnl.rhcloud.com/login",
				data : 	{ 	username:	usernameInput,
							password:	passwordInput
						},
				crossDomain: true,
				method : "GET"
			}).done(function(responseData, textStatus, jqXHR){
				if ( responseData=="Success" )
				{
					$("#admin_credentials")	.css("display", "none");
					$("#admin_loading")		.css("display", "none");
					$("#admin_logged_in")	.css("display", "inline");
					$("#admin_logged_msg")	.text("Vous êtes connecté en tant qu'administrateur !");
					
					// On login success only
					CKEDITOR_BASEPATH="ckeditor/";
					$.getScript( "ckeditor/ckeditor.js" )
					  .done(function( script, textStatus ) {
						console.log( textStatus );
						$(".editableAware").attr("contenteditable", "true");
					  })
					  .fail(function( jqxhr, settings, exception ) {
						console.log( "exception : " + exception );
					});
				}
				else
				{
					$("#admin_credentials")	.css("display", "inline");
					$("#admin_loading")		.css("display", "none");
					$("#admin_logged_in")	.css("display", "none");
					
					$("#admin_msg").text( responseData );
				}
			}).fail(function(jqXHR, textStatus){ 
				$("#admin_credentials")	.css("display", "inline");
				$("#admin_loading")		.css("display", "none");
				$("#admin_logged_in")	.css("display", "none");
				$("#admin_msg").text( "Une erreur inconnu est survenue lors de la tentative de connection." );
				console.log( "Request failed: " + textStatus );
			}).complete(function(){});		
		});
		////////////////////////////////////////////////////
		// SEND UPDATE /////////////////////////////////////
		////////////////////////////////////////////////////
		$("#uUpdate").click(function()
		{
			$("#admin_credentials")	.css("display", "none");
			$("#admin_loading")		.css("display", "inline");
			$("#admin_logged_in")	.css("display", "none");
			
			var usernameInput 	= $("#uName").val();
			var passwordInput 	= $("#uPass").val();
			var content 		= $(".editableAware").html();
			var destinationFile	= $(".editableAware").attr("rel");
			console.log("destinationFile = " + destinationFile);
			
			$.ajax
			({
				url : "https://cherrypy-jsncrdnl.rhcloud.com/update",
				data : 	{ 	
							username:	usernameInput,
							password:	passwordInput,
							value:		content
						},
				crossDomain: true,
				method : "GET"
			}).done(function(responseData, textStatus, jqXHR){
				if ( responseData=="Success" )
				{
					$("#admin_credentials")	.css("display", "none");
					$("#admin_loading")		.css("display", "none");
					$("#admin_logged_in")	.css("display", "inline");
					$("#admin_logged_msg")	.text("Modifications enregistrées ! Actualisation de la page ...");
					
					setTimeout(function(){ window.location = "?"; }, 1500);
				}
				else
				{
					$("#admin_credentials")	.css("display", "none");
					$("#admin_loading")		.css("display", "none");
					$("#admin_logged_in")	.css("display", "inline");
					
					$("#admin_logged_msg")	.text( responseData );
				}
			}).fail(function(jqXHR, textStatus){ 
				$("#admin_credentials")	.css("display", "none");
				$("#admin_loading")		.css("display", "none");
				$("#admin_logged_in")	.css("display", "inline");
				$("#admin_logged_msg").text( "Une erreur inconnu est survenue lors de la tentative de connection." );
				console.log( "Request failed: " + textStatus );
			}).complete(function(){});		
		});
		
		/*$(document).ready(function()
		{
			$(".colorSwitch").click(function()
			{
				console.log("colorSwitch clicked with rel = " + $(this).attr("rel") + " and color = " + $(this).css("background") );
				$( $(this).attr("rel") ).css("background-color", $(this).css("background-color") );
			});
		});*/
	</script>
    </body>
</html>

